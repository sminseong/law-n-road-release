<template>
  <teleport to="body">
    <!-- ì—´ê¸° ë²„íŠ¼ -->
    <button
        v-if="!isOpen"
        ref="buttonRef"
        @click="open"
        class="chatbot-open-btn"
        aria-label="ì±—ë´‡ ì—´ê¸°"
    >ğŸ¤–</button>

    <!-- íŒì—…: ë²„íŠ¼ ë°”ë¡œ ìœ„ì— ê³ ì • -->
    <div v-if="isOpen" class="chatbot-popup">
      <ClientChatbot @close="close" />
    </div>
  </teleport>
</template>

<script setup>
import { ref } from 'vue'
import ClientChatbot from './ClientChatbot.vue'

const isOpen     = ref(false)
function open()  { isOpen.value = true  }
function close() { isOpen.value = false }
</script>

<style scoped>
.chatbot-open-btn {
  position: fixed;
  bottom: 20px;
  /* ë ˆì´ì•„ì›ƒ ìµœëŒ€ ë„ˆë¹„ 1200px ê¸°ì¤€, ì•ˆìª½ìœ¼ë¡œ 20px ë–¨ì–´ëœ¨ë¦¼ */
  right: calc((100vw - 1200px) / 2 - 190px);
  width: 80px; height: 80px;
  border-radius: 50%;
  background: #fff; border: 2px solid #eee;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; z-index: 10000;
  font-size: 32px;
}
.chatbot-open-btn:hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.18);
}

.chatbot-popup {
  position: fixed;
  bottom: 20px;
  right: calc((100vw - 1200px) / 2 - 100px);
  width: 420px; height: 560px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  z-index: 10000;
  overflow: hidden;
}
</style>